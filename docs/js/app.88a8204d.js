(function(e){function t(t){for(var n,a,o=t[0],l=t[1],u=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},i={app:0},s=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"2ad5":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("795d"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",{on:{click:e.clearReplies}},[e._v("Clear")]),r("div",{attrs:{id:"fb-reply"}},[r("ReplyContainer",{attrs:{replies:e.replies}})],1)])},s=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reply-container"},[e._l(e.replies.parents,(function(t){return r("Reply",{key:t.id,attrs:{item:t,subItem:e.findChildrenReply(t.id)}})})),r("div",{staticClass:"bottom-textarea"},[r("Avatar"),r("ReplyTextarea",{on:{submit:e.addReply}})],1)],2)},o=[],l=(r("4de4"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:e.rootCoverStyle},[r("div",{staticClass:"reply-cover",style:{marginBottom:e.isEditing?"24px":""},on:{mouseenter:function(t){e.moreIconShow=!0},mouseleave:function(t){e.moreIconShow=!1}}},[r("Avatar",{attrs:{size:e.isSub?24:32}}),e.isEditing?r("ReplyTextarea",{attrs:{initValue:e.item.text},on:{submit:e.updateReply,cancel:function(t){e.isEditing=!1}}}):r("div",{staticClass:"content-cover"},[r("div",{staticClass:"text-cover"},[r("div",{staticClass:"text"},[r("div",[r("span",{staticClass:"username"},[e._v(e._s(e.author.name))])]),r("div",[e.targetUser?r("span",{staticClass:"username"},[e._v(e._s(e.targetUser.name)+" ")]):e._e(),r("div",{staticClass:"content"},e._l(e.item.text.split("\n"),(function(t,n){return r("div",{key:n,domProps:{textContent:e._s(t)}})})),0),e.item.likes.length?r("span",{staticClass:"like-count",on:{mouseenter:function(t){e.likeListShow=!0},mouseleave:function(t){e.likeListShow=!1}}},[r("img",{staticStyle:{display:"inline"},attrs:{width:"20",src:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 16 16'%3e%3cdefs%3e%3clinearGradient id='a' x1='50%25' x2='50%25' y1='0%25' y2='100%25'%3e%3cstop offset='0%25' stop-color='%2318AFFF'/%3e%3cstop offset='100%25' stop-color='%230062DF'/%3e%3c/linearGradient%3e%3cfilter id='c' width='118.8%25' height='118.8%25' x='-9.4%25' y='-9.4%25' filterUnits='objectBoundingBox'%3e%3cfeGaussianBlur in='SourceAlpha' result='shadowBlurInner1' stdDeviation='1'/%3e%3cfeOffset dy='-1' in='shadowBlurInner1' result='shadowOffsetInner1'/%3e%3cfeComposite in='shadowOffsetInner1' in2='SourceAlpha' k2='-1' k3='1' operator='arithmetic' result='shadowInnerInner1'/%3e%3cfeColorMatrix in='shadowInnerInner1' values='0 0 0 0 0 0 0 0 0 0.299356041 0 0 0 0 0.681187726 0 0 0 0.3495684 0'/%3e%3c/filter%3e%3cpath id='b' d='M8 0a8 8 0 00-8 8 8 8 0 1016 0 8 8 0 00-8-8z'/%3e%3c/defs%3e%3cg fill='none'%3e%3cuse fill='url(%23a)' xlink:href='%23b'/%3e%3cuse fill='black' filter='url(%23c)' xlink:href='%23b'/%3e%3cpath fill='white' d='M12.162 7.338c.176.123.338.245.338.674 0 .43-.229.604-.474.725a.73.73 0 01.089.546c-.077.344-.392.611-.672.69.121.194.159.385.015.62-.185.295-.346.407-1.058.407H7.5c-.988 0-1.5-.546-1.5-1V7.665c0-1.23 1.467-2.275 1.467-3.13L7.361 3.47c-.005-.065.008-.224.058-.27.08-.079.301-.2.635-.2.218 0 .363.041.534.123.581.277.732.978.732 1.542 0 .271-.414 1.083-.47 1.364 0 0 .867-.192 1.879-.199 1.061-.006 1.749.19 1.749.842 0 .261-.219.523-.316.666zM3.6 7h.8a.6.6 0 01.6.6v3.8a.6.6 0 01-.6.6h-.8a.6.6 0 01-.6-.6V7.6a.6.6 0 01.6-.6z'/%3e%3c/g%3e%3c/svg%3e"}}),r("span",[e._v(e._s(e.item.likes.length))])]):e._e(),r("span",{directives:[{name:"show",rawName:"v-show",value:e.likeListShow,expression:"likeListShow"}],staticClass:"like-list"},e._l(e.item.likes,(function(t){return r("p",{key:t},[e._v(" "+e._s(e.$store.state.user.users.find((function(e){return e.id===t})).name)+" ")])})),0)])]),r("div",{staticClass:"more-icon",on:{click:e.openMoreList}},[e._v(" "+e._s(e.moreIconShow?"…":"ㅤ")+" ")])]),r("div",{staticClass:"action-bar"},[r("a",{attrs:{href:"#"},on:{click:e.toggleLikeReply}},[e._v("좋아요 "+e._s(e.isLiked?"취소":""))]),r("span",[e._v("·")]),r("a",{attrs:{href:"#"},on:{click:function(t){return e.openReplyArea()}}},[e._v("답글달기")]),r("span",[e._v("·")]),r("a",{attrs:{href:"#"}},[e._v(e._s(e._f("pastTimeFormat")(e.item.createdAt)))])])])],1),e._l(e.subItem,(function(t){return r("Reply",{key:t.id,attrs:{item:t,isSub:""},on:{openReplyArea:e.openReplyArea}})})),!e.isSub&&e.textareaShow?r("div",{staticClass:"is-sub"},[r("Avatar",{attrs:{size:"24"}}),r("ReplyTextarea",{attrs:{placeholder:"댓글 달기",isSub:""},on:{submit:e.addReply,cancel:function(t){e.textareaShow=!1}}})],1):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.moreListShow,expression:"moreListShow"}],staticClass:"more-list",on:{click:function(t){e.moreListShow=!1}}},[r("div",{staticClass:"content"},[r("div",{on:{click:e.startEdit}},[e._v("수정")]),r("hr"),r("div",{on:{click:e.deleteReply}},[e._v("삭제")])])])],2)}),u=[],c=(r("7db0"),r("caad"),r("2532"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("img",{style:e.imgStyle,attrs:{src:e.src,width:e.width,height:e.height}})}),d=[],p=(r("a9e3"),{props:{src:{type:String,default:r("f917")},size:{type:[Number,String],default:32},unit:{type:String,default:"px"}},computed:{width:function(){return this.size+this.unit},height:function(){return this.size+this.unit},imgStyle:function(){return{borderRadius:this.size/2+this.unit}}}}),f=p,h=(r("f46c"),r("2877")),m=Object(h["a"])(f,c,d,!1,null,"2713fa20",null),y=m.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.text,expression:"text",modifiers:{trim:!0}}],ref:"textarea",style:e.textareaStyle,attrs:{placeholder:e.placeholder,rows:e.rows},domProps:{value:e.text},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.addReply(t))},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("cancel")},input:function(t){t.target.composing||(e.text=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})},g=[],x=(r("ac1f"),r("466d"),{name:"ReplyTextarea",props:{placeholder:{type:String,default:"댓글을 입력하세요..."},initValue:{type:String,default:""},isSub:{type:Boolean,default:!1},width:{type:String,default:"100%"}},data:function(){return{text:""}},created:function(){this.text=this.initValue},mounted:function(){this.$refs.textarea.focus()},methods:{addReply:function(){this.text&&(this.$emit("submit",this.text),this.text="")}},computed:{rows:function(){var e=(this.text.match(/\n/g)||[]).length;return e+1},textareaStyle:function(){return{width:this.width}}}}),R=x,S=(r("eb0e"),Object(h["a"])(R,v,g,!1,null,"40354d5e",null)),w=S.exports,b=1e3,_=60*b,I=60*_,k=24*I,E="clo3dFacebookUsers",L="clo3dFacebookReplies",O={name:"Reply",components:{Avatar:y,ReplyTextarea:w},props:{item:{type:Object,default:function(){return{}}},subItem:{type:Array,default:function(){return[]}},isSub:{type:Boolean,default:!1}},filters:{pastTimeFormat:function(e){var t=Date.now()-e;return t<10*b?"방금":t<_?Math.round(t/b)+"초 전":t<I?Math.round(t/_)+"분 전":t<k?Math.round(t/I)+"시간 전":Math.round(t/k)+"일 전"}},data:function(){return{textareaShow:!1,moreIconShow:!1,moreListShow:!1,likeListShow:!1,isEditing:!1,targetUserId:null,targetReply:null}},methods:{openReplyArea:function(e){this.isSub?this.$emit("openReplyArea",this.item.authorId):(this.targetUserId=e,this.textareaShow=!0)},openMoreList:function(){this.moreListShow=!0,this.targetReply=this.item},addReply:function(e){this.$store.dispatch("addReply",{text:e,authorId:this.authUser.id,parentReplyId:this.item.id,targetUserId:this.targetUserId})},startEdit:function(){this.isEditing=!0},updateReply:function(e){this.$store.dispatch("updateReply",{replyId:this.targetReply.id,replyText:e}),this.isEditing=!1},deleteReply:function(){confirm("댓글을 삭제하시겠습니까?")&&(console.log(this.targetReply),this.$store.dispatch("deleteReply",this.targetReply.id))},toggleLikeReply:function(){this.$store.dispatch("toggleLikeReply",{replyId:this.item.id,userId:this.authUser.id})}},computed:{authUser:function(){return this.$store.state.user.authUser},author:function(){var e=this;return this.$store.getters.users.find((function(t){return t.id===e.item.authorId}))},targetUser:function(){var e=this;return this.item.targetUserId?this.$store.getters.users.find((function(t){return t.id===e.item.targetUserId})):null},rootCoverStyle:function(){return{paddingLeft:this.isSub?"40px":"0",paddingBottom:this.isSub?"0":"8px"}},isLiked:function(){return this.item.likes.includes(this.authUser.id)}}},C=O,T=(r("add3"),Object(h["a"])(C,l,u,!1,null,null,null)),U=T.exports,$={name:"ReplyContainer",components:{Avatar:y,Reply:U,ReplyTextarea:w},props:{replies:{type:Object,default:function(){return{parents:[],children:[]}}}},methods:{findChildrenReply:function(e){return this.replies.children.filter((function(t){return t.parentReplyId===e}))},addReply:function(e){this.$store.dispatch("addReply",{text:e,authorId:this.$store.state.user.authUser.id})}}},A=$,P=(r("b2df"),Object(h["a"])(A,a,o,!1,null,"7e80cf76",null)),j=P.exports,M={name:"App",components:{ReplyContainer:j},computed:{replies:function(){return this.$store.getters.arragedReplies}},mounted:function(){this.$store.dispatch("loadData")},methods:{clearReplies:function(){localStorage.removeItem(L),location.reload()}}},D=M,B=(r("5c0b"),Object(h["a"])(D,i,s,!1,null,null,null)),N=B.exports,z=(r("13d5"),r("2f62")),F=(r("c740"),r("4160"),r("d81d"),r("a434"),r("159b"),function(){return Math.round(99999999*Math.random())}),J={state:{replies:[]},mutations:{SET_REPLIES:function(e,t){e.replies=t},ADD_REPLY:function(e,t){var r=t.text,n=t.authorId,i=t.parentReplyId,s=t.targetUserId;e.replies.push({id:F(),text:r,authorId:n,parentReplyId:i,targetUserId:s,likes:[],createdAt:Date.now()})},UPDATE_REPLY:function(e,t){var r=t.replyId,n=t.replyText,i=e.replies.find((function(e){return e.id===r}));i.text=n},DELETE_REPLY:function(e,t){e.replies.filter((function(e){return e.id===t||e.parentReplyId===t})).map((function(e){return e.id})).forEach((function(t){var r=e.replies.findIndex((function(e){return e.id===t}));e.replies.splice(r,1)}))},TOGGLE_LIKE_REPLY:function(e,t){var r,n=t.replyId,i=t.userId,s=null===(r=e.replies.find((function(e){return e.id===n})))||void 0===r?void 0:r.likes;if(s){var a=s.findIndex((function(e){return e===i}));return a<0?s.push(i):s.splice(a,1)}}},actions:{addReply:function(e,t){var r=e.state,n=e.commit;n("ADD_REPLY",t),localStorage.setItem(L,JSON.stringify(r.replies))},updateReply:function(e,t){var r=e.state,n=e.commit,i=t.replyId,s=t.replyText;n("UPDATE_REPLY",{replyId:i,replyText:s}),localStorage.setItem(L,JSON.stringify(r.replies))},deleteReply:function(e,t){var r=e.state,n=e.commit;n("DELETE_REPLY",t),localStorage.setItem(L,JSON.stringify(r.replies))},toggleLikeReply:function(e,t){var r=e.state,n=e.commit,i=t.replyId,s=t.userId;n("TOGGLE_LIKE_REPLY",{replyId:i,userId:s}),localStorage.setItem(L,JSON.stringify(r.replies))}}},Y={state:{authUser:{id:0,name:"김찬중"},users:[]},mutations:{SET_USERS:function(e,t){e.users=t}},actions:{}};n["a"].use(z["a"]);var G=new z["a"].Store({namespace:!0,state:{},getters:{users:function(e){return e.user.users},arragedReplies:function(e){return e.reply.replies.reduce((function(e,t){return null===t.parentReplyId||void 0===t.parentReplyId?e.parents.push(t):e.children.push(t),e}),{parents:[],children:[]})}},mutations:{},actions:{loadData:function(e){var t=e.commit,r=JSON.parse(localStorage.getItem(E)||"[]");r.push({id:0,name:"김찬중"});var n=JSON.parse(localStorage.getItem(L)||"[]");t("SET_USERS",r),t("SET_REPLIES",n)}},modules:{user:Y,reply:J}});n["a"].config.productionTip=!1,new n["a"]({store:G,render:function(e){return e(N)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),i=r.n(n);i.a},"65cc":function(e,t,r){},9364:function(e,t,r){},"9c0c":function(e,t,r){},add3:function(e,t,r){"use strict";var n=r("9364"),i=r.n(n);i.a},b2df:function(e,t,r){"use strict";var n=r("2ad5"),i=r.n(n);i.a},c9f3:function(e,t,r){},eb0e:function(e,t,r){"use strict";var n=r("65cc"),i=r.n(n);i.a},f46c:function(e,t,r){"use strict";var n=r("c9f3"),i=r.n(n);i.a},f917:function(e,t,r){e.exports=r.p+"img/blank_user.1d03d421.jpg"}});