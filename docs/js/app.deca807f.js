(function(e){function t(t){for(var r,a,o=t[0],u=t[1],l=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==i[u]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2b34":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("795d"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{staticStyle:{position:"fixed"},on:{click:e.clearData}},[e._v(" Clear ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser,expression:"selectedUser"}],staticStyle:{position:"fixed",left:"100px"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedUser=t.target.multiple?n:n[0]},e.onChangeUser]}},e._l(e.users,(function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v(" "+e._s(t.name)+" ")])})),0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticStyle:{position:"fixed",left:"160px"},domProps:{value:e.username},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("button",{staticStyle:{position:"fixed",left:"280px"},on:{click:e.addUser}},[e._v(" 사용자 추가 ")]),n("div",{attrs:{id:"fb-reply"}},[n("ReplyContainer")],1)])},s=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reply-container"},[e._l(e.replies.parents,(function(t){return n("Reply",{key:t.id,attrs:{item:t,subItem:e.findChildrenReply(t.id)},on:{addReply:e.addReply}})})),n("div",{staticClass:"bottom-textarea"},[n("Avatar"),n("ReplyTextarea",{on:{submit:e.addReply}})],1)],2)},o=[],u=(n("4de4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.outerCoverStyle},[n("div",{staticClass:"reply-cover",style:e.innerCoverStyle,on:{mouseenter:function(t){e.moreIconShow=!0},mouseleave:function(t){e.moreIconShow=!1}}},[n("Avatar",{attrs:{size:e.avatarSize}}),e.isEditing?n("ReplyTextarea",{attrs:{initValue:e.item.text},on:{submit:e.updateReply,cancel:function(t){e.isEditing=!1}}}):n("div",{staticClass:"content-cover"},[n("div",{staticClass:"text-cover"},[n("div",{staticClass:"text"},[n("div",[n("span",{staticClass:"username"},[e._v(e._s(e.author.name))])]),n("br"),n("div",[e.targetUser?n("span",{directives:[{name:"show",rawName:"v-show",value:e.taggingShow,expression:"taggingShow"}],staticClass:"username"},[e._v(e._s(e.targetUser.name)+" ")]):e._e(),n("div",{staticClass:"content"},e._l(e.lines,(function(t,r){return n("div",{key:r,domProps:{textContent:e._s(t)}})})),0),e.likeCount?n("span",{staticClass:"like-count",on:{mouseenter:function(t){e.likeListShow=!0},mouseleave:function(t){e.likeListShow=!1}}},[n("img",{attrs:{width:"20",src:e.likeImgData}}),n("span",[e._v(e._s(e.likeCount))])]):e._e(),n("span",{directives:[{name:"show",rawName:"v-show",value:e.likeListShow,expression:"likeListShow"}],staticClass:"like-list"},e._l(e.item.likes,(function(t){return n("p",{key:t},[e._v(" "+e._s(e.findUsernameById(t))+" ")])})),0)])]),e.isMyReply?n("div",{staticClass:"more-icon",on:{click:e.openMoreList}},[e._v(" "+e._s(e.moreIconShow?"…":"ㅤ")+" ")]):e._e()]),n("div",{staticClass:"action-bar"},[n("a",{on:{click:e.toggleLikeReply}},[e._v("좋아요 "+e._s(e.isLiked?"취소":""))]),n("span",[e._v("·")]),n("a",{on:{click:function(t){return e.openReplyArea(e.item.authorId)}}},[e._v("답글달기")]),n("span",[e._v("·")]),n("a",[e._v(e._s(e._f("pastTimeFormat")(e.item.createdAt)))])])])],1),e._l(e.subItem,(function(t){return n("Reply",{key:t.id,attrs:{item:t,isSub:""},on:{openReplyArea:e.openReplyArea}})})),!e.isSub&&e.textareaShow?n("div",{staticClass:"is-sub"},[n("Avatar",{attrs:{size:"24"}}),n("ReplyTextarea",{attrs:{placeholder:"댓글 달기",isSub:""},on:{submit:e.addReply,cancel:function(t){e.textareaShow=!1}}})],1):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.moreListShow,expression:"moreListShow"}],staticClass:"more-list",on:{click:function(t){e.moreListShow=!1}}},[n("div",{staticClass:"content"},[n("div",{on:{click:e.startEdit}},[e._v("수정")]),n("hr"),n("div",{on:{click:e.deleteReply}},[e._v("삭제")])])])],2)}),l=[],c=(n("7db0"),n("caad"),n("b0c0"),n("ac1f"),n("2532"),n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("img",{style:e.imgStyle,attrs:{src:e.src,width:e.width,height:e.height}})}),d=[],p=(n("a9e3"),{props:{src:{type:String,default:n("f917")},size:{type:[Number,String],default:32},unit:{type:String,default:"px"}},computed:{width:function(){return this.size+this.unit},height:function(){return this.size+this.unit},imgStyle:function(){return{borderRadius:this.size/2+this.unit}}}}),f=p,h=(n("5d1d"),n("2877")),m=Object(h["a"])(f,c,d,!1,null,"160d4a8c",null),y=m.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.text,expression:"text",modifiers:{trim:!0}}],ref:"textarea",style:e.textareaStyle,attrs:{placeholder:e.placeholder,rows:e.rows},domProps:{value:e.text},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.submit(t))},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("cancel")},input:function(t){t.target.composing||(e.text=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})},g=[],S=(n("466d"),{name:"ReplyTextarea",props:{placeholder:{type:String,default:"댓글을 입력하세요..."},initValue:{type:String,default:""},isSub:{type:Boolean,default:!1},width:{type:String,default:"100%"}},data:function(){return{text:""}},created:function(){this.text=this.initValue},mounted:function(){this.$refs.textarea.focus()},methods:{submit:function(){this.text&&(this.$emit("submit",this.text),this.text="")}},computed:{rows:function(){var e=(this.text.match(/\n/g)||[]).length;return e+1},textareaStyle:function(){return{width:this.width}}}}),x=S,b=(n("f5c7"),Object(h["a"])(x,v,g,!1,null,"b12abc88",null)),w=b.exports,R=1e3,_=60*R,I=60*_,k=24*I,E="clo3dFacebookUsers",U="clo3dFacebookReplies",C={name:"Reply",components:{Avatar:y,ReplyTextarea:w},props:{item:{type:Object,default:function(){return{}}},subItem:{type:Array,default:function(){return[]}},isSub:{type:Boolean,default:!1}},filters:{pastTimeFormat:function(e){var t=Date.now()-e;return t<10*R?"방금":t<_?Math.round(t/R)+"초 전":t<I?Math.round(t/_)+"분 전":t<k?Math.round(t/I)+"시간 전":Math.round(t/k)+"일 전"}},data:function(){return{textareaShow:!1,moreIconShow:!1,moreListShow:!1,likeListShow:!1,isEditing:!1,targetUserId:null,targetReply:null,likeImgData:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 16 16'%3e%3cdefs%3e%3clinearGradient id='a' x1='50%25' x2='50%25' y1='0%25' y2='100%25'%3e%3cstop offset='0%25' stop-color='%2318AFFF'/%3e%3cstop offset='100%25' stop-color='%230062DF'/%3e%3c/linearGradient%3e%3cfilter id='c' width='118.8%25' height='118.8%25' x='-9.4%25' y='-9.4%25' filterUnits='objectBoundingBox'%3e%3cfeGaussianBlur in='SourceAlpha' result='shadowBlurInner1' stdDeviation='1'/%3e%3cfeOffset dy='-1' in='shadowBlurInner1' result='shadowOffsetInner1'/%3e%3cfeComposite in='shadowOffsetInner1' in2='SourceAlpha' k2='-1' k3='1' operator='arithmetic' result='shadowInnerInner1'/%3e%3cfeColorMatrix in='shadowInnerInner1' values='0 0 0 0 0 0 0 0 0 0.299356041 0 0 0 0 0.681187726 0 0 0 0.3495684 0'/%3e%3c/filter%3e%3cpath id='b' d='M8 0a8 8 0 00-8 8 8 8 0 1016 0 8 8 0 00-8-8z'/%3e%3c/defs%3e%3cg fill='none'%3e%3cuse fill='url(%23a)' xlink:href='%23b'/%3e%3cuse fill='black' filter='url(%23c)' xlink:href='%23b'/%3e%3cpath fill='white' d='M12.162 7.338c.176.123.338.245.338.674 0 .43-.229.604-.474.725a.73.73 0 01.089.546c-.077.344-.392.611-.672.69.121.194.159.385.015.62-.185.295-.346.407-1.058.407H7.5c-.988 0-1.5-.546-1.5-1V7.665c0-1.23 1.467-2.275 1.467-3.13L7.361 3.47c-.005-.065.008-.224.058-.27.08-.079.301-.2.635-.2.218 0 .363.041.534.123.581.277.732.978.732 1.542 0 .271-.414 1.083-.47 1.364 0 0 .867-.192 1.879-.199 1.061-.006 1.749.19 1.749.842 0 .261-.219.523-.316.666zM3.6 7h.8a.6.6 0 01.6.6v3.8a.6.6 0 01-.6.6h-.8a.6.6 0 01-.6-.6V7.6a.6.6 0 01.6-.6z'/%3e%3c/g%3e%3c/svg%3e"}},methods:{openReplyArea:function(e){this.isSub?this.$emit("openReplyArea",this.item.authorId):(this.targetUserId=e,this.textareaShow=!0)},openMoreList:function(){this.moreListShow=!0,this.targetReply=this.item},addReply:function(e){this.$store.dispatch("addReply",{text:e,authorId:this.authUser.id,parentReplyId:this.item.id,targetUserId:this.targetUserId})},startEdit:function(){this.isEditing=!0},updateReply:function(e){this.$store.dispatch("updateReply",{replyId:this.targetReply.id,replyText:e}),this.isEditing=!1},deleteReply:function(){confirm("댓글을 삭제하시겠습니까?")&&this.$store.dispatch("deleteReply",this.targetReply.id)},toggleLikeReply:function(){this.$store.dispatch("toggleLikeReply",{replyId:this.item.id,userId:this.authUser.id})},findUsernameById:function(e){var t;return null===(t=this.users.find((function(t){return t.id===e})))||void 0===t?void 0:t.name}},computed:{authUser:function(){return this.$store.state.user.authUser},users:function(){return this.$store.state.user.users},author:function(){var e=this;return this.$store.getters.users.find((function(t){return t.id===e.item.authorId}))},targetUser:function(){var e=this;return this.$store.getters.users.find((function(t){return t.id===e.item.targetUserId}))},lines:function(){return(this.item.text||"").split("\n")},isLiked:function(){return this.item.likes.includes(this.authUser.id)},taggingShow:function(){return this.item.authorId!==this.targetUser.id},avatarSize:function(){return this.isSub?24:32},likeCount:function(){var e;return null===(e=this.item.likes)||void 0===e?void 0:e.length},outerCoverStyle:function(){return{paddingLeft:this.isSub?"40px":"0",paddingBottom:this.isSub?"0":"8px"}},innerCoverStyle:function(){return{marginBottom:this.isEditing?"24px":""}},isMyReply:function(){return this.item.authorId===this.authUser.id}}},L=C,T=(n("a74d"),Object(h["a"])(L,u,l,!1,null,"f761bebe",null)),O=T.exports,$={name:"ReplyContainer",components:{Avatar:y,Reply:O,ReplyTextarea:w},methods:{findChildrenReply:function(e){return this.replies.children.filter((function(t){return t.parentReplyId===e}))},addReply:function(e){this.$store.dispatch("addReply",{text:e,authorId:this.$store.state.user.authUser.id}),this.$nextTick((function(){scrollTo(0,document.body.scrollHeight)}))}},computed:{replies:function(){return this.$store.getters.arragedReplies}}},A=$,D=(n("d73e"),Object(h["a"])(A,a,o,!1,null,"42f6ebfa",null)),P=D.exports,M={name:"App",components:{ReplyContainer:P},mounted:function(){this.$store.dispatch("loadData"),this.selectedUser=this.$store.state.user.authUser},data:function(){return{selectedUser:null,username:""}},methods:{clearData:function(){confirm("데이터를 초기화하시겠습니까?")&&this.$store.dispatch("clearData")},addUser:function(){this.$store.dispatch("addUser",this.username),this.username=""},onChangeUser:function(){this.$store.commit("SET_AUTHUSER",this.selectedUser)}},computed:{users:function(){return this.$store.state.user.users}}},j=M,N=(n("5c0b"),Object(h["a"])(j,i,s,!1,null,null,null)),B=N.exports,z=(n("13d5"),n("2f62")),J=(n("c740"),n("4160"),n("d81d"),n("a434"),n("159b"),function(){return Math.round(99999999*Math.random())}),F={state:{replies:[]},mutations:{SET_REPLIES:function(e,t){e.replies=t},ADD_REPLY:function(e,t){var n=t.text,r=t.authorId,i=t.parentReplyId,s=t.targetUserId;e.replies.push({id:J(),text:n,authorId:r,parentReplyId:i,targetUserId:s,likes:[],createdAt:Date.now()})},UPDATE_REPLY:function(e,t){var n=t.replyId,r=t.replyText,i=e.replies.find((function(e){return e.id===n}));i.text=r},DELETE_REPLY:function(e,t){e.replies.filter((function(e){return e.id===t||e.parentReplyId===t})).map((function(e){return e.id})).forEach((function(t){var n=e.replies.findIndex((function(e){return e.id===t}));e.replies.splice(n,1)}))},TOGGLE_LIKE_REPLY:function(e,t){var n,r=t.replyId,i=t.userId,s=null===(n=e.replies.find((function(e){return e.id===r})))||void 0===n?void 0:n.likes;if(s){var a=s.findIndex((function(e){return e===i}));return a<0?s.push(i):s.splice(a,1)}}},actions:{addReply:function(e,t){var n=e.state,r=e.commit;r("ADD_REPLY",t),localStorage.setItem(U,JSON.stringify(n.replies))},updateReply:function(e,t){var n=e.state,r=e.commit,i=t.replyId,s=t.replyText;r("UPDATE_REPLY",{replyId:i,replyText:s}),localStorage.setItem(U,JSON.stringify(n.replies))},deleteReply:function(e,t){var n=e.state,r=e.commit;r("DELETE_REPLY",t),localStorage.setItem(U,JSON.stringify(n.replies))},toggleLikeReply:function(e,t){var n=e.state,r=e.commit,i=t.replyId,s=t.userId;r("TOGGLE_LIKE_REPLY",{replyId:i,userId:s}),localStorage.setItem(U,JSON.stringify(n.replies))}}},Y={state:{authUser:{},users:[]},mutations:{SET_AUTHUSER:function(e,t){e.authUser=t},SET_USERS:function(e,t){e.users=t},ADD_USER:function(e,t){e.users.push({id:J(),name:t})}},actions:{addUser:function(e,t){var n=e.commit,r=e.state;n("ADD_USER",t),localStorage.setItem(E,JSON.stringify(r.users))}}};r["a"].use(z["a"]);var G=new z["a"].Store({getters:{users:function(e){return e.user.users},arragedReplies:function(e){return e.reply.replies.reduce((function(e,t){return null===t.parentReplyId||void 0===t.parentReplyId?e.parents.push(t):e.children.push(t),e}),{parents:[],children:[]})}},actions:{loadData:function(e){var t=e.commit,n=e.state,r=JSON.parse(localStorage.getItem(E)||"[]"),i=JSON.parse(localStorage.getItem(U)||"[]");r.length||r.push({id:0,name:"김찬중"}),t("SET_USERS",r),t("SET_REPLIES",i),t("SET_AUTHUSER",n.user.users[0])},clearData:function(){localStorage.removeItem(E),localStorage.removeItem(U),location.reload()}},modules:{user:Y,reply:F}});r["a"].config.productionTip=!1,new r["a"]({store:G,render:function(e){return e(B)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},"5d1d":function(e,t,n){"use strict";var r=n("9e15"),i=n.n(r);i.a},"9c0c":function(e,t,n){},"9e15":function(e,t,n){},a74d:function(e,t,n){"use strict";var r=n("f650"),i=n.n(r);i.a},b783:function(e,t,n){},d73e:function(e,t,n){"use strict";var r=n("2b34"),i=n.n(r);i.a},f5c7:function(e,t,n){"use strict";var r=n("b783"),i=n.n(r);i.a},f650:function(e,t,n){},f917:function(e,t,n){e.exports=n.p+"img/blank_user.1d03d421.jpg"}});